# Оновлення системи

## 1. Підготовка до оновлення

Перед тим як почати оновлення, необхідно:

1. **Перевірка доступності серверів:** Упевніться, що ви маєте доступ до всіх необхідних серверів для оновлення.
2. **Оцінка ризиків:** Оцініть зміни, які будуть внесені в систему, та підготуйте план на випадок необхідності відкату.
3. **Перевірка журналу змін:** Перегляньте CHANGELOG.md чи інші записи про зміни для отримання детальної інформації про нові функції чи виправлення.

## 2. Створення резервних копій

Перед оновленням необхідно створити резервні копії:

1. **Резервне копіювання файлів:**
   Створіть резервні копії важливих файлів, таких як конфігурації:
   ```bash
   cp /path/to/config /path/to/backup/config_backup
   ```
## 3. Перевірка сумісності  

Переконайтесь, що нові версії коду та залежностей сумісні з поточними налаштуваннями:

1. **Оновлення залежностей: Перевірте requirements.txt або інші менеджери залежностей і оновіть їх за необхідності:**

    ```bash
    pip install --upgrade -r requirements.txt
    ```
2. **Тестування нових версій: Перевірте, чи працює новий код на тестовому середовищі, перевіривши наявність потенційних помилок.**

## 4.Процес оновлення

1. **Зупинка необхідних служб**
    ```bash
   sudo systemctl stop my_form_bot
    ```
2. **Розгортання нового коду** 
    ```bash
   git pull origin main
    ```
   
    Оновлення залежностей
    ```bash
   pip install -r requirements.txt
    ```

3. **Перезапуск служби**
    ```bash
    sudo systemctl restart formbot
    ```

## 5.Оновлення конфігурацій

1. **Оновіть конфігураційні файли**

    ```bash
    cp /path/to/new/config /path/to/current/config
    ```
2. **Перезавантажте служби**
  
    ```bash
   sudo systemctl restart my_form_bot
    ```

## 6.Перевірка працездатності

1. **Перегляд логів**
     ```bash
   tail -f /var/log/my_form_bot.log
    ```
2. **Тестування функціональності** 
    Проведіть тестування всіх основних функцій, щоб переконатись, що система працює як очікується.

## 7. Процедура відкату (Rollback) у разі невдалого оновлення

Якщо під час оновлення виникли критичні помилки, система перестала працювати або функціональність порушена — виконайте відкат до стабільної версії.

1. **Зупиніть поточні служби**

Зупиніть сервіси, що працюють з новою версією:

```bash
sudo systemctl stop my_form_bot
```
Відновіть резервні копії

```bash
cp /path/to/backup/config_backup /path/to/config
```
Відновіть попередню версію коду

```bash
git checkout tags/v1.2.3
``` 
Переінсталюйте залежності для цієї версії:

```bash
pip install -r requirements.txt
```

Перевірте логи та працездатність

```bash
tail -f /var/log/formbot.log
```
Повідомте команду/користувачів

Якщо оновлення супроводжувалось зупинкою сервісу — повідомте відповідальних осіб або користувачів про повернення до стабільної версії.
